<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>T3E7服务器</title>
		<link rel="icon" type="image/jpeg" sizes="32x32" href="server.jpg">
		<style type="text/css">
			body{
				background-color: #2a2d3e;
				color: white;
				text-align: center;
				font-family: Arial, sans-serif;
			}
			.icon{
				width: 100%;
				height: 150px;
				background-color: #3a2d3e;
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 20px;
				margin-bottom: 20px;
			}
			.server-info {
				background-color: #3a3d4e;
				padding: 20px;
				border-radius: 10px;
				margin: 20px auto;
				max-width: 800px;
				text-align: left;
			}
			.server-status {
				display: flex;
				justify-content: space-between;
				margin-bottom: 15px;
				padding: 15px;
				border-radius: 8px;
				background-color: #4a4d5e;
			}
			.recommended {
				border: 2px solid #4CAF50;
				position: relative;
			}
			.recommended::after {
				content: "推荐";
				position: absolute;
				top: -10px;
				right: 10px;
				background-color: #4CAF50;
				color: white;
				padding: 2px 8px;
				border-radius: 10px;
				font-size: 12px;
			}
			.status-online {
				color: #4CAF50;
				font-weight: bold;
			}
			.status-offline {
				color: #f44336;
				font-weight: bold;
			}
			.copy-btn {
				background-color: #4CAF50;
				color: white;
				border: none;
				padding: 5px 10px;
				border-radius: 4px;
				cursor: pointer;
				margin-left: 10px;
			}
			.copy-btn:hover {
				background-color: #3e8e41;
			}
			.server-icon {
				width: 64px;
				height: 64px;
				border-radius: 8px;
			}
			.player-count {
				margin-top: 10px;
			}
			.loading {
				color: #FFC107;
			}
			.nav-link {
				text-decoration: none;
				color: #fff;
				padding: 12px 24px;
				border-radius: 8px;
				background-color: #4CAF50;
				border-bottom: 4px solid #2E7D32;
				position: relative;
				transition: all 0.1s;
			}
			.nav-link:hover {
				background-color: #3e8e41;
				border-bottom-width: 2px;
				transform: translateY(2px);
			}
			.nav-link:active {
				border-bottom-width: 0;
				transform: translateY(4px);
			}
			.navigation {
				display: flex;
				justify-content: center;
				gap: 15px;
				padding: 20px;
			}
		</style>
	</head>
	<body>
		<div class="navigation">
			<a href="home.html" class="nav-link">首页</a>
			<a href="about.html" class="nav-link">关于</a>
			<a href="charts.html" class="nav-link">我的铺面</a>
			<a href="server.html" class="nav-link">服务器</a>
		</div>
		
		<div class="icon">
			<img src="server.jpg" width="100" height="100" />
			<font color="yellow"><marquee>Tip: <strong>我们没有什么中文网，任何自称中文网的都是假网站，请仔细甄别</strong></marquee></font>
		</div>
		
		<h1>T3E7服务器官网</h1>
		<p>服务器版本：<font color="yellow">Minecraft Java Edition</font> <font color="red">1.21.1</font></p>
		
		<div class="server-info">
			<h2>服务器状态</h2>
			<div id="server-status-container">
				<div class="server-status" id="server1-status">
					<div>
						<h3>主服务器</h3>
						<p>地址: 45.192.98.216:56057 <button class="copy-btn" onclick="navigator.clipboard.writeText('us-la1.qwq0v0.fun:37605')">复制</button></p>
						<p>状态: <span class="loading">检测中...</span></p>
						<p class="player-count">玩家: -/-</p>
						<p>延迟: - ms</p>
					</div>
					<img class="server-icon" id="server1-icon" src="" alt="服务器图标">
				</div>
				
				<div class="server-status" id="server2-status">
					<div>
						<h3>备用服务器</h3>
						<p>地址: 156.238.254.146:37605 <button class="copy-btn" onclick="navigator.clipboard.writeText('156.238.254.146:37605')">复制</button></p>
						<p>状态: <span class="loading">检测中...</span></p>
						<p class="player-count">玩家: -/-</p>
						<p>延迟: - ms</p>
					</div>
					<img class="server-icon" id="server2-icon" src="" alt="服务器图标">
				</div>
			</div>
		</div>
		
		<a href="https://qm.qq.com/cgi-bin/qm/qr?k=T5WHV1CT-aHSenW-qQXmxN_XeNbz9xVI&jump_from=webapi&authKey=eZKtnYArQn3xkXBECK1WlrUqs/s/WMR1t/78LsUJiJZnsSUud6jxNfNwv3hqf6Ub" style="color:blue;text-decoration:none">点击加入服务器QQ交流群</a>
		
		<script>
			// 服务器检测功能
			async function checkServerStatus(serverAddress, serverElementId, iconElementId) {
				const startTime = Date.now();
				const statusElement = document.querySelector(`#${serverElementId} p:nth-of-type(2) span`);
				const playersElement = document.querySelector(`#${serverElementId} .player-count`);
				const latencyElement = document.querySelector(`#${serverElementId} p:nth-of-type(4)`);
				const iconElement = document.getElementById(iconElementId);
				
				try {
					statusElement.textContent = "检测中...";
					statusElement.className = "loading";
					
					// 使用mcstatus.io的API检测服务器状态
					const response = await fetch(`https://api.mcsrvstat.us/2/${serverAddress}`);
					const data = await response.json();
					
					const latency = Date.now() - startTime;
					
					if (data.online) {
						statusElement.textContent = "在线";
						statusElement.className = "status-online";
						playersElement.textContent = `玩家: ${data.players.online}/${data.players.max}`;
						latencyElement.textContent = `延迟: ${latency} ms`;
						
						// 显示服务器图标
						if (data.icon) {
							iconElement.src = data.icon;
						} else {
							iconElement.src = "https://api.mcsrvstat.us/icon/" + serverAddress;
						}
						
						return {
							online: true,
							latency: latency,
							players: data.players.online,
							maxPlayers: data.players.max,
							motd: data.motd ? data.motd.clean.join(" ") : "无描述",
							version: data.version
						};
					} else {
						statusElement.textContent = "离线";
						statusElement.className = "status-offline";
						playersElement.textContent = "玩家: -/-";
						latencyElement.textContent = "延迟: - ms";
						return { online: false };
					}
				} catch (error) {
					console.error(`检测服务器 ${serverAddress} 状态时出错:`, error);
					statusElement.textContent = "检测失败";
					statusElement.className = "status-offline";
					return { online: false, error: error.message };
				}
			}
			
			// 检测所有服务器并标记推荐服务器
			async function checkAllServers() {
				const server1 = "45.192.98.216:56057";
				const server2 = "156.238.254.146:37605";
				
				const [status1, status2] = await Promise.all([
					checkServerStatus(server1, "server1-status", "server1-icon"),
					checkServerStatus(server2, "server2-status", "server2-icon")
				]);
				
				// 标记延迟较低的服务器为推荐
				if (status1.online && status2.online) {
					if (status1.latency < status2.latency) {
						document.getElementById("server1-status").classList.add("recommended");
					} else {
						document.getElementById("server2-status").classList.add("recommended");
					}
				} else if (status1.online) {
					document.getElementById("server1-status").classList.add("recommended");
				} else if (status2.online) {
					document.getElementById("server2-status").classList.add("recommended");
				}
				
				// 每30秒重新检测一次
				setTimeout(checkAllServers, 30000);
			}
			
			// 页面加载后开始检测
			document.addEventListener("DOMContentLoaded", checkAllServers);
		</script>
	</body>
</html>